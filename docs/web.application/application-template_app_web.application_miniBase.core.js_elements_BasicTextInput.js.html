<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: application-template/app/web.application/miniBase.core.js/elements/BasicTextInput.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: application-template/app/web.application/miniBase.core.js/elements/BasicTextInput.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Basic input element
 * @class
 */
var BasicTextInput = (function()
{
    /**
     * BasicTextInput constructor
     * @constructor
     */
    function BasicTextInput(params)
    {
        this.listeners   = params.listeners    || [];
        this._validators = (params.validators) || [];
        this.label       = params.label        || null;
        this.validators  = [];
        this.tag         = "input";
        this.clsName     = "BasicTextInput";

        this._validators.push(this.generateLengthValidator(params));
    }

    BasicTextInput.prototype.generateLengthValidator = function(params)
    {
        var minlength = params.minlength || 0,
            msg       = ((params.minlength_message) ? (params.minlength_message.message || MINIMUM_LENGTH_MESSAGE):MINIMUM_LENGTH_MESSAGE).replace("\$\{minlength\}", minlength);

            return {
                "msg": msg,
                "type": "Error",
                "minlength": minlength,
                "conformity": false
            };
    }

    BasicTextInput.prototype.render = function()
    {
        if (this.label)
        {
            this.generateLabel();
        } else {
            MINIBASE.renderElement(this);
        }

        this.pushValidators(this._validators);
    }

    BasicTextInput.prototype.generateLabel = function()
    {
        var tb = document.createElement("div")
            lb = document.createElement("span");

        tb.className = this.clsName + "-Container";
        lb.className = this.clsName + "-Label";
        lb.innerHTML = this.label;

        tb.appendChild(lb);
        tb.appendChild(this.dom);

        this.master.appendChild(tb);
    }

    BasicTextInput.prototype.pushValidators = function(validators)
    {
        for (v=0; v &lt; validators.length; v++)
        {
            validators[v] = this.pushValidator(validators[v], true);
        }

        this.iterateGenerators();
    }

    BasicTextInput.prototype.iterateGenerators = function()
    {
        var action = this.generateValidate();

        MINIBASE.connectListener(this.dom,
        {
            event: "keyup",
            action: action
        });

        MINIBASE.connectListener(this.dom,
        {
            event: "focus",
            action: action
        });
    }

    BasicTextInput.prototype.generateValidate = function()
    {
        var self = this;

        return function(ev)
        {
            for (var n=0; n &lt; self.validators.length; n++)
            {
                var validator  = self.validators[n],
                    conformity = (validator.re) ? this.value.replace(validator.re, "") === "":true,
                    minlength  = (validator.minlength === 0) ? true:this.value.length >= validator.minlength;

                validator.remove();

                if (!conformity || !minlength)
                {
                    validator.render(this);
                }
            }
        }
    }

    BasicTextInput.prototype.pushValidator = function(validatorParams, massAppend)
    {
        var validator = new Validator(validatorParams, this);

        if (!massAppend) this.iterateGenerators();

        this.validators.push(validator);

        return validator;
    }

    return BasicTextInput;
})();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BasicTextInput.html">BasicTextInput</a></li><li><a href="Validator.html">Validator</a></li></ul><h3>Interfaces</h3><ul><li><a href="-_addEventListener.html">_addEventListener</a></li></ul><h3>Global</h3><ul><li><a href="global.html#format">format</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sat Nov 16 2019 18:48:57 GMT+0300 (MSK)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
